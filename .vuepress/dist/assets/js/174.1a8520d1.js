(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{166:function(t,a,s){t.exports=s.p+"assets/img/cors.196f7e32.jpg"},245:function(t,a,s){"use strict";s.r(a);var n=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"content"},[n("h2",{attrs:{id:"跨域"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#跨域","aria-hidden":"true"}},[t._v("#")]),t._v(" 跨域")]),n("blockquote",[n("p",[t._v("什么是跨域：因浏览器同源政策限制，不同域之间的数据交互是被禁止的，除了script元素\n跨域的方式：8种方式")])]),n("h3",{attrs:{id:"骨架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#骨架","aria-hidden":"true"}},[t._v("#")]),t._v(" 骨架")]),n("ol",[n("li",[t._v("cors - 服务端设置head请求数据 allow-methods, allow-origin")]),n("li",[t._v("jsonp - 动态创建script元素，请求数据，\b回调函数执行返回数据")]),n("li",[t._v("document.domain + iframe - \b设置相同主域")]),n("li",[t._v("window.name + iframe - 同一个窗口的name属性共享")]),n("li",[t._v("location.hash + iframe - 通过\bhash值传递")]),n("li",[t._v("postMessage + iframe - H5新特性 \bpostMessage onMessage")]),n("li",[t._v("ngix反向代理")]),n("li",[t._v("浏览器设置跨域 - 供开发使用")])]),n("h3",{attrs:{id:"同源政策限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#同源政策限制","aria-hidden":"true"}},[t._v("#")]),t._v(" 同源政策限制")]),n("p",[t._v("同源策略的限制：\n存储在浏览器中的数据，如localStroage、Cooke和IndexedDB不能通过脚本跨域访问\n不能通过脚本操作不同域下的DOM\n不能通过ajax请求不同域的数据")]),n("h3",{attrs:{id:"详情"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#详情","aria-hidden":"true"}},[t._v("#")]),t._v(" 详情")]),n("ol",[n("li",[t._v("cors，跨域资源共享，设置head信息\n"),n("img",{attrs:{src:s(166),alt:""}})]),n("li",[t._v("jsonp")])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ele "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("createElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'script'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ele"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'http://xxxx.com?callback=back'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("getElementsByTagName")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'head'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ele"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[t._v("document.domain")])]),n("ul",[n("li",[t._v("前置条件是必需拥有共同的顶级域名")]),n("li",[t._v("不可ajax")])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("ngix反向代理")])]),n("ul",[n("li",[t._v("正向代理\n设置代理服务器，对象是客户端，浏览器")]),n("li",[t._v("反向代理\n浏览器不需做配置\n对象是服务端\nngix配置rewrite")])]),n("ol",{attrs:{start:"5"}},[n("li",[t._v("浏览器设置跨域")])]),n("ul",[n("li",[t._v("49版本之前： --disable-web-security")]),n("li",[t._v("49版本之后：在电脑上新建一个目录，例如：C:\\MyChromeDevUserData，"),n("br"),t._v("\n在属性页面中的目标输入框里加上   --disable-web-security --user-data-dir=C:\\MyChromeDevUserData，--user-data-dir的值就是刚才新建的目录")])])])}],e=s(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);a.default=r.exports}}]);